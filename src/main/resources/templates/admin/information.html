<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="@{~/framework/head.html}"></head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
    <!--头部-->
    <div th:include="@{~/framework/admin_head.html}"></div>
    <!--侧边导航栏-->
    <div th:include="@{~/framework/admin_sidebar.html}"></div>

    <div class="layui-body">
        <!-- 内容主体区域 -->
        <div style="padding:15px;">
            <h1 class="site-h1">信息 / 信息管理</h1>
            <div class="demoTable">
                搜索登录帐号：
                <div class="layui-inline">
                    <input class="layui-input" name="id" id="demoReload" autocomplete="off">
                </div>
                <button class="layui-btn" data-type="reload">搜索</button>
                <button class="layui-btn" onclick="window.location.href='/role/create'">添加</button>
            </div>
            <table id="teacherPage" class="layui-hide" lay-filter="teacher"></table>
        </div>
    </div>

    <!--尾部-->
    <div th:include="@{~/framework/foot.html}"></div>
</div>
<script type="text/html" id="barDemo">
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="update">修改</a>
</script>

<script th:inline="none">
    //JavaScript代码区域
    layui.use(['element', 'table', 'form'], function(){
        var element = layui.element;
        var form = layui.form;
        var table = layui.table;
        table.render({
            elem: '#teacherPage'
            ,url: '/information/teacherPage' //数据接口
            ,page: true //开启分页
            ,where: {
                roleType: 1
            }
            ,text: {
                none: '暂无相关数据' //默认：无数据。注：该属性为 layui 2.2.5 开始新增
            }
            ,cols: [[ //表头
                {field: 'id', title: 'ID', sort: true}
                ,{field: 'loginName', title: '登录帐号'}
                ,{field: 'number', title: '工号'}
                ,{field: 'name', title: '姓名', sort: true}
                ,{field: 'sex', title: '性别'}
                ,{field: 'idCart', title: '身份证号'}
                ,{field: 'positionalTitles', title: '职称'}
                ,{field: 'nation', title: '民族'}
                ,{field: 'address', title: '地址'}
                ,{field: 'birthday', title: '出生日期'}
                ,{field: 'phone', title: '联系电话'}
                ,{field: 'department', title: '所属部门'}
                ,{field: 'classes', title: '执教班级'}
                ,{field: 'subject', title: '执教科目'}
                ,{field: 'createTime', title: '创建时间'}
                ,{field: 'right', title: '操作', align: 'center', toolbar: '#barDemo'}
            ]]
            ,id: 'Reload'
        });
        var $ = layui.$, active = {
            reload: function(){
                var demoReload = $('#demoReload');

                //执行重载
                table.reload('Reload', {
                    page: {
                        curr: 1 //重新从第 1 页开始
                    }
                    ,where: {
                        loginName: demoReload.val()
                    }
                });
            }
        };

        $('.demoTable .layui-btn').on('click', function(){
            var type = $(this).data('type');
            active[type] ? active[type].call(this) : '';
        });
        //监听工具条
       table.on('tool(teacher)', function(obj) {
           var data = obj.data;
           if(obj.event === 'update'){
               layer.open({
                   title: '修改'
                   ,content: $('#opens').html()
                   ,area: ['50%','80%']
               });
               form.render();
           }
       });
//            if(obj.event === 'resetPassword'){
//                layer.confirm('确定要重置' + data.roleType + data.loginName + "的密码吗？", function(index){
//                    $.ajax({
//                        type: 'post',
//                        url: '/role/resetPassword',
//                        data: {
//                            id: data.id,
//                            roleType: data.roleType
//                        },
//                        success:function (RoleCheckVO) {
//                            if (RoleCheckVO.status == 0){
//                                layer.open({
//                                    title: '提示'
//                                    ,content: RoleCheckVO.message
//                                });
//                                location.reload();
//                            }else {
//                                layer.open({
//                                    title: '提示'
//                                    ,content: RoleCheckVO.message
//                                });
//                            }
//                        },
//                        error:function () {
//                            layer.open({
//                                title: '提示'
//                                ,content: "系统错误，请稍后重试！"
//                            });
//                            return false;
//                        }
//                    });
//                    layer.close(index);
//                });
//            }else if(obj.event === 'cancelRole'){
//                layer.confirm('真的要注销' + data.roleType + data.loginName + "的帐号吗？", function(index){
//                    $.ajax({
//                        type: 'post',
//                        url: '/role/cancelRole',
//                        data: {
//                            id: data.id,
//                            roleType: data.roleType
//                        },
//                        success:function (RoleCheckVO) {
//                            if (RoleCheckVO.status == 0){
//                                layer.open({
//                                    title: '提示'
//                                    ,content: RoleCheckVO.message
//                                });
//                                location.reload();
//                            }else {
//                                layer.open({
//                                    title: '提示'
//                                    ,content: RoleCheckVO.message
//                                });
//                            }
//                        },
//                        error:function () {
//                            layer.open({
//                                title: '提示'
//                                ,content: "系统错误，请稍后重试！"
//                            });
//                            return false;
//                        }
//                    });
//                    layer.close(index);
//                });
//            }
//        });
    });

</script>
<script type="text/html" id="opens">
    <form class="layui-form" action="">
        <fieldset class="layui-elem-field">
            <legend>
                <a>帐号信息</a>
            </legend>
            <div class="layui-form-item">
                <label class="layui-form-label">登录帐号</label>
                <div class="layui-input-inline">
                    <input type="text" id="loginName" name="loginName" required  lay-verify="required" placeholder="请输入登录帐号..." autocomplete="off" class="layui-input">
                </div>
                <div class="layui-form-mid layui-word-aux">请填写教师姓名拼音，格式：张三（zhangsan）</div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">密码</label>
                <div class="layui-input-inline">
                    <input type="password" id="loginPassword" name="loginPassword" required lay-verify="required" placeholder="请输入登录密码..." autocomplete="off" class="layui-input">
                </div>
                <div class="layui-form-mid layui-word-aux">请填写登录密码，默认为123456</div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">密码</label>
                <div class="layui-input-inline">
                    <input type="password" id="loginPassword1" name="loginPassword1" required lay-verify="required" placeholder="请再次输入登录密码..." autocomplete="off" class="layui-input">
                </div>
                <div class="layui-form-mid layui-word-aux">请再次填写登录密码，默认为123456</div>
            </div>
            <div class="layui-form-item">
                <div class="layui-input-inline">
                    <input type="text" id="roleType" name="roleType" required  lay-verify="required" autocomplete="off" class="layui-input" value="教师" style="display: none">
                </div>
            </div>
        </fieldset>
        <fieldset class="layui-elem-field">
            <legend>
                <a>教师信息</a>
            </legend>
            <div class="layui-form-item">
                <label class="layui-form-label">工号</label>
                <div class="layui-input-inline">
                    <input type="text" id="number" name="number" required  lay-verify="required" placeholder="请输入工号..." autocomplete="off" class="layui-input">
                </div>
                <div id="numberdiv" class="layui-form-mid layui-word-aux"></div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">教师姓名</label>
                <div class="layui-input-inline">
                    <input type="text" id="name" name="name" required  lay-verify="required" placeholder="请输入教师姓名..." autocomplete="off" class="layui-input">
                </div>
                <div class="layui-form-mid layui-word-aux">请填写教师姓名</div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">性别</label>
                <div class="layui-input-block">
                    <input type="radio" name="sex" value="男" title="男" checked="">
                    <input type="radio" name="sex" value="女" title="女">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">身份证号</label>
                <div class="layui-input-inline">
                    <input type="text" id="idCart" name="idCart" required  lay-verify="required|identity" placeholder="请输入身份证号..." autocomplete="off" class="layui-input">
                </div>
                <div class="layui-form-mid layui-word-aux">请填写教师身份证号</div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">职称</label>
                <div class="layui-input-inline">
                    <select id="positionalTitles" name="positionalTitles" lay-verify="required">
                        <option value="">请选择职称</option>
                        <option value="中学正高级教师">中学正高级教师</option>
                        <option value="中学高级教师" selected>中学高级教师</option>
                        <option value="中学一级教师">中学一级教师</option>
                        <option value="中学二级教师">中学二级教师</option>
                        <option value="中学三级教师">中学三级教师</option>
                    </select>
                </div>
                <div class="layui-form-mid layui-word-aux">请选择教师职称</div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">民族</label>
                <div class="layui-input-inline">
                    <select id="nation" name="nation" lay-verify="required" lay-search>
                        <option value="">请选择民族</option>
                        <option value="汉族" selected>汉族</option>
                        <option value="满族">满族</option>
                        <option value="藏族">藏族</option>
                        <option value="蒙古族">蒙古族</option>
                        <option value="维吾尔族">维吾尔族</option>
                        <option value="壮族">壮族</option>
                        <option value="回族">回族</option>
                        <option value="苗族">苗族</option>
                        <option value="彝族">彝族</option>
                        <option value="土家族">土家族</option>
                        <option value="侗族">侗族</option>
                        <option value="布依族">布依族</option>
                        <option value="瑶族">瑶族</option>
                        <option value="白族">白族</option>
                        <option value="朝鲜族">朝鲜族</option>
                    </select>
                </div>
                <div class="layui-form-mid layui-word-aux">请选择教师民族</div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">籍贯</label>
                <div class="layui-input-inline">
                    <input type="text" id="place" name="place" required  lay-verify="required" placeholder="请输入籍贯..." autocomplete="off" class="layui-input">
                </div>
                <div class="layui-form-mid layui-word-aux">请填写教师籍贯</div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">地址</label>
                <div class="layui-input-inline" style="width: 500px;">
                    <input type="text" id="address" name="address" required  lay-verify="required" placeholder="请输入地址..." autocomplete="off" class="layui-input">
                </div>
                <div class="layui-form-mid layui-word-aux">请填写教师住址</div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">联系电话</label>
                <div class="layui-input-inline">
                    <input type="text" id="phone" name="phone" required  lay-verify="required|phone" placeholder="请输入联系电话..." autocomplete="off" class="layui-input">
                </div>
                <div class="layui-form-mid layui-word-aux">请填写教师联系电话</div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">部门</label>
                <div class="layui-input-inline">
                    <select id="department" name="department" multiple>
                        <option value="">请选择部门</option>
                        <option value="学生处" selected>学生处</option>
                        <option value="教研组">教研组</option>
                    </select>
                </div>
                <div class="layui-form-mid layui-word-aux">请选择教师部门</div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">班级</label>
                <div class="layui-input-inline">
                    <select id="classes" name="classes" lay-search multiple>
                        <option value="">请选择班级</option>
                        <option value="暂无班级" selected>暂无班级</option>
                    </select>
                </div>
                <div class="layui-form-mid layui-word-aux">请选择教师执教的班级</div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">学科</label>
                <div class="layui-input-inline">
                    <select id="subject" name="subject" lay-verify="required" lay-search>
                        <option value="">请选择学科</option>
                        <option value="语文" selected>语文</option>
                        <option value="数学">数学</option>
                        <option value="英语">英语</option>
                        <option value="物理">物理</option>
                        <option value="化学">化学</option>
                        <option value="生物">生物</option>
                        <option value="政治">政治</option>
                        <option value="地理">地理</option>
                        <option value="历史">历史</option>
                    </select>
                </div>
                <div class="layui-form-mid layui-word-aux">请选择教师执教的学科</div>
            </div>
        </fieldset>
        <hr>
        <div class="layui-form-item">
            <div class="layui-input-block">
                <button class="layui-btn" lay-submit lay-filter="formDemo">立即提交</button>
                <button type="reset" class="layui-btn layui-btn-primary">重置</button>
            </div>
        </div>
    </form>
</script>
</body>
</html>